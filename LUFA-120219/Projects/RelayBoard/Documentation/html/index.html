<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>OB&#39;s Dual-Relay outlet control using a Teensy2++: OB&#39;s Quad-Relay outlet control using a Teensy2++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OB's Dual-Relay outlet control using a Teensy2++&#160;<span id="projectnumber">0.0.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('index.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">OB's Quad-Relay outlet control using a Teensy2++ </div>  </div>
</div>
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="Sec_Compat"></a>
Project Compatibility:</h2>
<p>The following list indicates what microcontrollers are compatible with this project.</p>
<ul>
<li>AT90USB1286</li>
</ul>
<h2><a class="anchor" id="Sec_Info"></a>
USB Information:</h2>
<p>The following table gives a rundown of the USB utilization of this project.</p>
<table class="doxtable">
<tr>
<td><b>USB Mode:</b> </td><td>Device  </td></tr>
<tr>
<td><b>USB Class:</b> </td><td>None  </td></tr>
<tr>
<td><b>USB Subclass:</b> </td><td>None  </td></tr>
<tr>
<td><b>Relevant Standards:</b> </td><td>USB Standards  </td></tr>
<tr>
<td><b>Usable Speeds:</b> </td><td>Low Speed Mode, Full Speed Mode  </td></tr>
</table>
<h2><a class="anchor" id="Sec_Description"></a>
Project Description:</h2>
<p>Firmware for a Teensy2++ AVR-based miniboard to control four relays, using the same protocol used by the commercially available Silver Shield PM power outlets ( <a href="http://sourceforge.net/projects/sispmctl">http://sourceforge.net/projects/sispmctl</a> ) sold for some time. Because this project mimics the original device, it can be controlled using the "sismpctl" package included in many Linux distributions - including router-orientated versions such as OpenWRT - to control the board's relays.</p>
<p>Relays 1 to 4 are respectively wired to pins C4, C5, C6 and C7 of the Teensy++ V2, which are the PORTC bits 4 to 7 of the AT90USB1286. The relays MUST be wired through a transistor, and a diode must be added in antiparallel on the relay's coil pins to protect the transistor from back EMF generated from the relay when the coil is turned off. The transistor base pin is wired to the Teensy data port through a 10K resistor. A LED may be also be added as a relay status indicator on each channel.</p>
<p>The Relay coil will be driven by the transistor, but the power will come from the 5V from the PC's USB port: Be careful in choosing the relay to avoid overloading the PC, as the maximum current used MUST remains under ~450mA @ 5V.</p>
<p>The author's tested relays are 2 Finder 32.21.7.005.2000, coil il 125ohm, which can handle 5A @ 250VAC. Be careful to use proper isolation if high voltages are manipulated. The author used Hotglue to isolate all parts of the PCB in contact with high voltage.</p>
<p>See <a href="http://www.pjrc.com/teensy/">http://www.pjrc.com/teensy/</a> for the Teensy2++ website.</p>
<table class="doxtable">
<tr>
<td><b>Signal:</b> </td><td><b>AVR Port:</b>  </td></tr>
<tr>
<td>Relay 1 </td><td>PORTC, Pin 4  </td></tr>
<tr>
<td>Relay 2 </td><td>PORTC, Pin 5  </td></tr>
<tr>
<td>Relay 3 </td><td>PORTC, Pin 6  </td></tr>
<tr>
<td>Relay 4 </td><td>PORTC, Pin 7  </td></tr>
<tr>
<td>Teensy2++ Yellow Led </td><td>PORTD, pin 6  </td></tr>
</table>
</div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="footer">Generated by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>

</body>
</html>
